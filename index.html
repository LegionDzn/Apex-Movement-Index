<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Apex Movement Index</title>

  <link rel="stylesheet" href="css/master.css">
  <link rel="stylesheet" href="css/dark.css">

  <script src="js/darkmode.js" charset="utf-8"></script>
  <script src="js/resize.js" charset="utf-8"></script>
  <script src="js/search.js" charset="utf-8"></script>
  <script src="js/switchpage.js" charset="utf-8"></script>

</head>

<body id="masterlightswitch" class="light">
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <div id="primarycontainer">
    <div class="container ToC" id="ToC">
      <p class="header">APEX MOVEMENT INDEX</p>
      <div class="br"></div>
      <div class="listcontainer">

        <ul id="TocList">
          <li class=""><span><a onclick="switchpage('subpages/introduction/introduction.html')" href="#"> Introduction</a></span></li>
          <li class=""><span><a onclick="switchpage('subpages/prerequisites/prerequisites.html')" href="#"> Prerequisites</a></span></li>
          <li class=""><span><a onclick="switchpage('subpages/holstering/holstering.html')" href="#"> Holstering and it's Importance</a></span></li>
          <br>
          <p class="subheader">Movement Tech</p>
          <div class="br"></div>
          <input class="form-field inverseborder" id="searchbar" autocomplete="off" onkeyup="run_search()" type="text" name="search" placeholder="Search..">
          <div class="br"></div>
        </ul>
      </div>

      <div class="listcontainer populate"></div>

      <div class="listcontainer">
        <ul id="TocList">
          <p class="subheader">Random Stuff</p>
          <div class="br">

          </div>
          <li class=""><span><a onclick="switchpage('subpages/bruh/bruh.htm')" href="#"> 360/cm Calculator</a></span></li>
          <li class="lightswitch"><span><a onclick="ToggleDark()" href="#"> Toggle Dark Mode</a></span></li>
          <li class=""><span><a onclick="switchpage('subpages/TEMPLATE/TEMPLATE.html')" href="#"> template</a></span></li>
          <br>
          <p class="subheader">Removed Tech</p>
          <div class="br">

          </div>
          <li class="searchableitem"><span><a onclick="switchpage('subpages/punchboosting/punchboosting.html')" href="#"> Punch Boosting</a></span></li>
          <div class="br">
          </div>
          <li><span>
              <p>V0.79</p>
            </span></li>
          <li><span>
              <p>Created By Legion#0567</p>
            </span></li>
        </ul>
      </div>

    </div>
    <div id="Main" class="container" style="height: 0px">
      <iframe id="Iframe" src="subpages/introduction/introduction.html" width="100%" height="min-content;"></iframe>
    </div>
    <script type="text/javascript">
      const output = document.querySelector('.populate');
      const output1 = document.createElement('div');
      const ul = document.createElement('ul');
      output.append(output1);
      output.append(ul);
      ul.setAttribute('id', 'TocList');

      ;
      const url = 'data1.json';
      window.addEventListener('DOMContentLoaded', () => {
        loadData();
      })

      function loadData() {
        fetch(url).then(rep => rep.json())
          .then((data) => {
            //console.log(data);
            addtoPage(data);
          })
      }

      function addtoPage(arr) {
        arr.forEach((el) => {
          console.log(el);
          const li = document.createElement('li');
          const span = document.createElement('span');
          const a = document.createElement('a');
          const p = document.createElement('p');

          var switchpageattr = "switchpage('subpages/" + el.name + "/" + el.name + "." + "html')"
          console.log(switchpageattr);
          a.setAttribute("onclick", switchpageattr);
          a.setAttribute("href", "#");
          a.textContent = "•" + el.title;
          p.textContent = "•" + el.title;
          li.classList.add("tabbed" + el.tabbed);
          li.classList.add("searchableitem");
          ul.append(li);
          li.append(span);
          if (el.linkless == 1) {
            span.append(p);
          } else {
            span.append(a);

          }


        });
      }
    </script>

</body>

</html>
